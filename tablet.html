<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>Tablet - Registar Entrada</title>
<style>
body{
  margin:0; padding:20px; font-family:'Helvetica',sans-serif;
  background: linear-gradient(270deg,#4caf50,#81c784,#2196f3);
  background-size:600% 600%;
  animation: gradientBG 15s ease infinite;
  overflow-x:hidden;
}
@keyframes gradientBG{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}
h1{text-align:center;color:white;font-size:2em;margin-bottom:30px;text-shadow:0 2px 6px rgba(0,0,0,0.3);}
form{max-width:400px;margin:0 auto; display:flex; flex-direction:column; gap:15px;}
input[type=text]{padding:12px 15px;border-radius:10px;border:none;font-size:1em;}
button{padding:12px; border:none; border-radius:12px; background:white; color:#4caf50; font-weight:bold; font-size:1em; cursor:pointer; transition:0.3s;}
button:hover{transform:scale(1.05);}
#msg{
  text-align:center;
  font-weight:bold;
  margin-top:10px;
  padding:10px;
  border-radius:12px;
  display:none;
}
#msg.success{background:#ffffffaa;color:#4caf50;}
#msg.error{background:#ffcccc;color:#e91e63;}
.particle{position:absolute;border-radius:50%;background:white;opacity:0.15;pointer-events:none;}
</style>
</head>
<body>

<h1>Registrar Entrada</h1>
<form id="form">
  <input type="text" id="nome" placeholder="Nome da pessoa" required/>
  <button type="submit">Registar</button>
</form>
<div id="msg"></div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyAZ328N4FCL_rbJmnxYKXsySHwEyeN1OIU",
  authDomain: "entrada-top.firebaseapp.com",
  databaseURL: "https://entrada-top-default-rtdb.firebaseio.com",
  projectId: "entrada-top",
  storageBucket: "entrada-top.firebasestorage.app",
  messagingSenderId: "1047123646784",
  appId: "1:1047123646784:web:bbd2a1006b8e186a0d02a5",
  measurementId: "G-02DT8KGKTW"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const form = document.getElementById('form');
const nomeInput = document.getElementById('nome');
const msgDiv = document.getElementById('msg');

form.addEventListener('submit', e=>{
  e.preventDefault();
  const nome = nomeInput.value.trim(); // remove espaços
  if(!nome){
    msgDiv.textContent = "O nome não pode estar vazio!";
    msgDiv.className = "error";
    msgDiv.style.display = "block";
    return;
  }

  const now = new Date();
  const data = `${String(now.getDate()).padStart(2,'0')}/${String(now.getMonth()+1).padStart(2,'0')}/${now.getFullYear()} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;

  db.ref('entradas').push({nome, data});
  
  // mostrar aviso de sucesso
  msgDiv.textContent = "Usuário guardado!";
  msgDiv.className = "success";
  msgDiv.style.display = "block";

  nomeInput.value='';

  // desaparece após 2 segundos
  setTimeout(()=>{ msgDiv.style.display='none'; }, 2000);
});

// partículas
const particles=[];
for(let i=0;i<20;i++){
  const p=document.createElement('div');
  p.className='particle';
  p.style.width=p.style.height=10+Math.random()*40+'px';
  p.style.left=Math.random()*window.innerWidth+'px';
  p.style.top=Math.random()*window.innerHeight+'px';
  document.body.appendChild(p);
  particles.push(p);
}
function moveParticles(x,y){
  particles.forEach((p,idx)=>{
    const dx=(x-window.innerWidth/2)*0.02*(idx+1);
    const dy=(y-window.innerHeight/2)*0.02*(idx+1);
    p.style.transform=`translate(${dx}px,${dy}px)`;
  });
}
window.addEventListener('mousemove', e=>moveParticles(e.clientX,e.clientY));
window.addEventListener('touchmove', e=>{
  const t=e.touches[0];
  moveParticles(t.clientX,t.clientY);
},{passive:true});
</script>

</body>
</html>
